# 启动优化

## 冷启动
Click Event --> IPC --> Process.start --> ActivityThread --> bindApplication --> lifeCycle --> ViewRootImpl

## 热启动
后台 --> 前台

## 温启动
LifeCycle

## 冷启动相关任务

### 冷启动之前（系统行为无法干预）： 
* 启动app
* 加载空白window
* 创建进程
* 
### 随后任务
* 创建application
* 启动主线程
* 创建mainactivity
### 在随后任务：

* 加载布局
* 布置屏幕
* 首帧绘制

### 冷启动优化方向：
Application 和Activity生命周期

## 启动时间测量方式
### adb命令
adb命令：adb shell am start -W packagename/首屏activity  
adb shell am start -W com.adamrocker.android.input.simeji/jp.baidu.simeji.home.HomeActivity  

ThisTime：最后一个activity启动耗时  
totaltime：所有activity启动耗时  
waittime：AMS启动activity的总耗时  

### 手动打点：
onWindowFocusChanged只是首帧时间  
尽量采用feed第一条数据展示（贴近用户真实体验）  

