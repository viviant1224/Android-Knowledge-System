
# JVM

## 内存模型

### 线程/工作内存/主内存 三者的关系
* 每个线程都有一个独立的工作内存，用于存储线程私有的数据
* Java内存模型中规定所有变量都存储在主内存，主内存是共享内存区域，所有线程都可以访问
* 线程对变量的操作(读取赋值等)必须在工作内存中进行。（线程安全问题的根本原因）  
（1）首先要将变量从主内存拷贝的自己的工作内存空间  
（2）然后对变量进行操作，操作完成后再将变量写回主内存  
（3）不能直接操作主内存中的变量，工作内存中存储着主内存中的变量副本拷贝  
（4）因此不同的线程间无法访问对方的工作内存，线程间的通信(传值)必须通过主内存来完成。

### 主内存和工作内存
* 主内存是在运行期间所有变量的存放区域，工作内存是运行期间中某一线程独立私有的内存存放区域
* 线程间无法访问对方的工作内存空间，都是通过主内存交换来实现
* 主内存的变量在工作内存中的值是复制过去的副本，读写完成后刷新主内存，这意味着主内存如果发生了改变，工作内存并无法获得最新的结果
* 多个线程对一个共享变量进行修改时，都是对自己工作内存的副本进行操作，相互不可见。主内存最后得到的结果是不可预知的  
![image](https://raw.githubusercontent.com/viviant1224/Android-Knowledge-System/main/images/Java/JVM/jvm1.webp)  




## Java垃圾回收

## Java类加载机制
